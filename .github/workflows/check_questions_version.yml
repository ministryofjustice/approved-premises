name: Check questions version

on:
  pull_request:

env:
  NODE_ENV: test

jobs:
  check_questions_version:
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v2

      - uses: actions/setup-node@v3
        with:
          cache: 'npm'

      - name: Installing dependencies
        run: npm install

      - name: Run script
        id: check-version
        run: npm run check-questions-version

      - uses: stefanzweifel/git-auto-commit-action@v4
        with:
          file_pattern: job/questions-versions/previous.json job/questions-versions/version.json
          commit_message: Increment questions + versions file
          push_options: '--no-verify'
